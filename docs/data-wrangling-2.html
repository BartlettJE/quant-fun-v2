<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 5 Data wrangling 2 | Quant-Fun-V2</title>
<meta name="author" content="psyTeachR Team">
<meta name="description" content="One of the key skills in an researcher's toolbox is the ability to work with data. When you run an experiment you get lots of data in various files. For instance, it is not uncommon for an...">
<meta name="generator" content="bookdown 0.23 with bs4_book()">
<meta property="og:title" content="Chapter 5 Data wrangling 2 | Quant-Fun-V2">
<meta property="og:type" content="book">
<meta property="og:url" content="https://psyteachr.github.io/quant-fun-v2/data-wrangling-2.html">
<meta property="og:image" content="https://psyteachr.github.io/quant-fun-v2/images/logos/twitter_card.png">
<meta property="og:description" content="One of the key skills in an researcher's toolbox is the ability to work with data. When you run an experiment you get lots of data in various files. For instance, it is not uncommon for an...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 5 Data wrangling 2 | Quant-Fun-V2">
<meta name="twitter:description" content="One of the key skills in an researcher's toolbox is the ability to work with data. When you run an experiment you get lots of data in various files. For instance, it is not uncommon for an...">
<meta name="twitter:image" content="https://psyteachr.github.io/quant-fun-v2/images/logos/twitter_card.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.10/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.5.1/tabs.js"></script><script src="libs/bs3compat-0.2.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-6NP3MF25W3"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-6NP3MF25W3');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="include/psyteachr.css">
<link rel="stylesheet" href="include/webex.css">
<link rel="stylesheet" href="include/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="psyTeachR Books">Quant-Fun-V2</a>:
        <small class="text-muted">psyTeachR Books</small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Overview</a></li>
<li><a class="" href="programming-basics.html"><span class="header-section-number">1</span> Programming basics</a></li>
<li><a class="" href="intro-to-r.html"><span class="header-section-number">2</span> Intro to R</a></li>
<li><a class="" href="loading-data.html"><span class="header-section-number">3</span> Loading data</a></li>
<li><a class="" href="data-wrangling-1.html"><span class="header-section-number">4</span> Data wrangling 1</a></li>
<li><a class="active" href="data-wrangling-2.html"><span class="header-section-number">5</span> Data wrangling 2</a></li>
<li><a class="" href="data-wrangling-3.html"><span class="header-section-number">6</span> Data Wrangling 3</a></li>
<li><a class="" href="intro-to-data-viz.html"><span class="header-section-number">7</span> Intro to Data Viz</a></li>
<li><a class="" href="probability.html"><span class="header-section-number">8</span> Probability</a></li>
<li><a class="" href="correlation.html"><span class="header-section-number">9</span> Correlation</a></li>
<li><a class="" href="t-tests.html"><span class="header-section-number">10</span> t-tests</a></li>
<li><a class="" href="power-and-error.html"><span class="header-section-number">11</span> Power and error</a></li>
<li><a class="" href="screening-data.html"><span class="header-section-number">12</span> Screening Data</a></li>
<li><a class="" href="visualisation.html"><span class="header-section-number">13</span> Visualisation</a></li>
<li><a class="" href="one-way-anova.html"><span class="header-section-number">14</span> One-way ANOVA</a></li>
<li><a class="" href="factorial-anova.html"><span class="header-section-number">15</span> Factorial ANOVA</a></li>
<li><a class="" href="regression.html"><span class="header-section-number">16</span> Regression</a></li>
<li><a class="" href="multiple-regression.html"><span class="header-section-number">17</span> Multiple regression</a></li>
<li class="book-part">Appendices</li>
<li><a class="" href="installing-r.html"><span class="header-section-number">A</span> Installing R</a></li>
<li><a class="" href="updating-packages.html"><span class="header-section-number">B</span> Updating packages</a></li>
<li><a class="" href="additional-resources.html"><span class="header-section-number">C</span> Additional Resources</a></li>
<li><a class="" href="symbols.html"><span class="header-section-number">D</span> Symbols</a></li>
<li><a class="" href="conventions.html"><span class="header-section-number">E</span> Conventions</a></li>
<li><a class="" href="license.html">License</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/psyteachr/template">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="data-wrangling-2" class="section level1" number="5">
<h1>
<span class="header-section-number">5</span> Data wrangling 2<a class="anchor" aria-label="anchor" href="#data-wrangling-2"><i class="fas fa-link"></i></a>
</h1>
<p>One of the key skills in an researcher's toolbox is the ability to work with data. When you run an experiment you get lots of data in various files. For instance, it is not uncommon for an experimental software to create a new file for every participant you run and for each participant's file to contain numerous columns and rows of data, only some of which are important. Being able to wrangle that data, manipulate it into different layouts, extract the parts you need, and summarise it, is one of the most important skills we will help you learn.</p>
<p>Over this course you will develop your skills in working with data. This chapter focuses on organizing data using the <code>tidyverse</code> package that you have read about in earlier chapters. Over the course, you will learn the main functions for data wrangling and how to use them, and we will use a number of different datasets to give you a wide range of exposure to what Psychology is about, and to reiterate that the same skills apply across different datasets. <strong>The skills don't change, just the data!</strong></p>
<p>There are some questions to answer as you go along to test your skills: use the example code as a guide and the solutions are at the bottom. Remember to be pro-active in your learning, work together as a community, and if you get stuck use the <strong><a href="https://www.rstudio.com/resources/cheatsheets/">cheatsheets</a></strong>. The key cheatsheet for this activity is the Data Transformation with dplyr.</p>
<div id="learning-to-wrangle-is-there-a-chastity-belt-on-perception" class="section level2" number="5.1">
<h2>
<span class="header-section-number">5.1</span> Learning to wrangle: Is there a chastity belt on perception<a class="anchor" aria-label="anchor" href="#learning-to-wrangle-is-there-a-chastity-belt-on-perception"><i class="fas fa-link"></i></a>
</h2>
<p>Nearly all data in research methods is stored in two-dimensional tables, either called data-frames, tables or tibbles. There are other ways of storing data that you will discover in time but mainly we will be using tibbles (if you would like more info, type <code>vignette("tibble")</code> in the console). A tibble is really just a table of data with columns and rows of information. But within that table you can get different types of data, i.e. numeric, integer, and character.</p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="17%">
<col width="82%">
</colgroup>
<thead><tr class="header">
<th align="left">Type of Data</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Numeric</td>
<td align="left">Numbers including decimals</td>
</tr>
<tr class="even">
<td align="left">Integer</td>
<td align="left">Numbers without decimals</td>
</tr>
<tr class="odd">
<td align="left">Character</td>
<td align="left">Tends to contain letters or be words</td>
</tr>
<tr class="even">
<td align="left">Factor</td>
<td align="left">Nominal (categorical). Can be words or numbers (e.g., male/1, female/2)</td>
</tr>
</tbody>
</table></div>
<p>Today we are going to be using data from this paper: <a href="http://journals.sagepub.com/doi/abs/10.1177/0956797617730892">Is there a Chastity Belt on Perception</a>. You can read the full paper if you like, but we will summarise the paper for you. The paper asks, <strong>does your ability to perform an action influence your perception?</strong> For instance, does your ability to hit a tennis ball influence how fast you perceive the ball to be moving? Or to phrase another way, do expert tennis players perceive the ball moving slower than novice tennis players?</p>
<p>This experiment does not use tennis players however, they used the Pong task: "a computerised game in which participants aim to block moving balls with various sizes of paddles". A bit like a very classic retro arcade game. Participants tend to estimate the balls as moving faster when they have to block it with a smaller paddle as opposed to when they have a bigger paddle. You can read the paper to get more details if you wish but hopefully that gives enough of an idea to help you understand the wrangling we will do on the data. We have cleaned up the data a little to start with. Let's begin!</p>
</div>
<div id="dw2-a1" class="section level2" number="5.2">
<h2>
<span class="header-section-number">5.2</span> Activity 1: Set-up Data Wrangling 2<a class="anchor" aria-label="anchor" href="#dw2-a1"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>Download <a href="PongBlueRedBack%201-16%20Codebook.csv" download>PongBlueRedBack 1-16 Codebook.csv</a> into your chapter folder.<br>
</li>
<li>Set the working directory to your chapter folder. Ensure the environment is clear.<br>
</li>
<li>Open a new R Markdown document and save it in your working directory. Call the file "Data wrangling 2".</li>
<li>If you're on the server, avoid a number of issues by restarting the session - click <code>Session</code> - <code>Restart R</code>
</li>
<li>Delete the default R Markdown welcome text and insert a new code chunk.</li>
<li>Copy and paste the below code into this code chunk and then run the code.</li>
</ul>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://tidyverse.tidyverse.org">"tidyverse"</a></span><span class="op">)</span>
<span class="va">pong_data</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"PongBlueRedBack 1-16 Codebook.csv"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">pong_data</span><span class="op">)</span></code></pre></div>
<pre><code>##   Participant     JudgedSpeed      PaddleLength   BallSpeed    TrialNumber    
##  Min.   : 1.00   Min.   :0.0000   Min.   : 50   Min.   :2.0   Min.   :  1.00  
##  1st Qu.: 4.75   1st Qu.:0.0000   1st Qu.: 50   1st Qu.:3.0   1st Qu.: 72.75  
##  Median : 8.50   Median :1.0000   Median :150   Median :4.5   Median :144.50  
##  Mean   : 8.50   Mean   :0.5471   Mean   :150   Mean   :4.5   Mean   :144.50  
##  3rd Qu.:12.25   3rd Qu.:1.0000   3rd Qu.:250   3rd Qu.:6.0   3rd Qu.:216.25  
##  Max.   :16.00   Max.   :1.0000   Max.   :250   Max.   :7.0   Max.   :288.00  
##  BackgroundColor      HitOrMiss       BlockNumber   
##  Length:4608        Min.   :0.0000   Min.   : 1.00  
##  Class :character   1st Qu.:0.0000   1st Qu.: 3.75  
##  Mode  :character   Median :1.0000   Median : 6.50  
##                     Mean   :0.6866   Mean   : 6.50  
##                     3rd Qu.:1.0000   3rd Qu.: 9.25  
##                     Max.   :1.0000   Max.   :12.00</code></pre>
<p><code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> provides a quick overview of the variables in your dataset and can be a useful quick check that you have indeed imported the correct data. It will also provide some basic descriptive statistics or whether the data is character (text) data which can also be useful to check.</p>
</div>
<div id="dw2-a2" class="section level2" number="5.3">
<h2>
<span class="header-section-number">5.3</span> Activity 2: Look at your data<a class="anchor" aria-label="anchor" href="#dw2-a2"><i class="fas fa-link"></i></a>
</h2>
<p>Let's have a look at the <code>pong_data</code> and see how it is organized. Click on <code>pong_data</code> in your environment.</p>
<p>In the dataset you will see that each row (observation) represents one trial per participant and that there were 288 trials for each of the 16 participants. The columns (variables) we have in the dataset are as follows:</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="center">Variable</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">Participant</td>
<td align="left">integer</td>
<td align="left">participant number</td>
</tr>
<tr class="even">
<td align="center">JudgedSpeed</td>
<td align="left">integer</td>
<td align="left">speed judgement (1=fast, 0=slow)</td>
</tr>
<tr class="odd">
<td align="center">PaddleLength</td>
<td align="left">integer</td>
<td align="left">paddle length (pixels)</td>
</tr>
<tr class="even">
<td align="center">BallSpeed</td>
<td align="left">integer</td>
<td align="left">ball speed (2 pixels/4ms)</td>
</tr>
<tr class="odd">
<td align="center">TrialNumber</td>
<td align="left">integer</td>
<td align="left">trial number</td>
</tr>
<tr class="even">
<td align="center">BackgroundColor</td>
<td align="left">character</td>
<td align="left">background display colour</td>
</tr>
<tr class="odd">
<td align="center">HitOrMiss</td>
<td align="left">integer</td>
<td align="left">hit ball=1, missed ball=0</td>
</tr>
<tr class="even">
<td align="center">BlockNumber</td>
<td align="left">integer</td>
<td align="left">block number (out of 12 blocks)</td>
</tr>
</tbody>
</table></div>
<p>We will use this data to master our skills of the Wickham Six verbs, taking each verb in turn. You should refer to the explanations and example code in Data Wrangling 1 to help you complete these. There are <strong>6 verbs to work through</strong> and after that we will briefly recap on two other functions before finishing with a quick look at pipes. Try each activity and ask your peers or your tutor if you need help.</p>
</div>
<div id="dw2-a3" class="section level2" number="5.4">
<h2>
<span class="header-section-number">5.4</span> Activity 3: <strong><code>select()</code></strong><a class="anchor" aria-label="anchor" href="#dw2-a3"><i class="fas fa-link"></i></a>
</h2>
<p>Either by inclusion (telling R all the variables you want to keep) or exclusion (telling R which variables you want to drop), select only the <code>Participant</code>, <code>PaddleLength</code>, <code>TrialNumber</code>, <code>BackgroundColor</code> and <code>HitOrMiss</code> columns from <code>pong_data</code> and store it in a new object named <code>select_dat</code>.</p>
</div>
<div id="dw2-a4" class="section level2" number="5.5">
<h2>
<span class="header-section-number">5.5</span> Activity 4: Reorder the variables<a class="anchor" aria-label="anchor" href="#dw2-a4"><i class="fas fa-link"></i></a>
</h2>
<p><code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> can also be used to reorder the columns in a table as the new table will display the variables in the order that you wrote them. Use <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> to keep only the columns <code>Participant</code>, <code>JudgedSpeed</code>, <code>BallSpeed</code>, <code>TrialNumber</code>, and <code>HitOrMiss</code> from <code>pong_data</code> but have them display in alphabetical order, left to right. Save this table in a new object named <code>reorder_dat</code>.</p>
</div>
<div id="dw2-a5" class="section level2" number="5.6">
<h2>
<span class="header-section-number">5.6</span> Activity 5: <strong><code>arrange()</code></strong><a class="anchor" aria-label="anchor" href="#dw2-a5"><i class="fas fa-link"></i></a>
</h2>
<p>Arrange the data by two variables: <code>HitOrMiss</code> (putting hits - 1 - first), and <code>JudgedSpeed</code> (fast judgement - 1 - first) and store this in an object named <code>arrange_dat</code>.</p>
</div>
<div id="dw2-a6" class="section level2" number="5.7">
<h2>
<span class="header-section-number">5.7</span> Activity 6: <code>filter()</code><a class="anchor" aria-label="anchor" href="#dw2-a6"><i class="fas fa-link"></i></a>
</h2>
<p>Use <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> to extract all Participants in the original <code>pong_data</code> that had:</p>
<ul>
<li>a fast speed judgement;</li>
<li>for speeds 2, 4, 5, and 7;</li>
<li>but missed the ball.</li>
</ul>
<p>Store this remaining data in a new object called <code>pong_fast_miss</code></p>
<div class="webex-solution">
<button>
Helpful Hint
</button>
<p>There are three parts to this filter so it is best to think about them individually and then combine them.</p>
<ol style="list-style-type: decimal">
<li><p>Filter all fast speed judgements (<code>JudgedSpeed</code>)</p></li>
<li><p>Filter for the speeds 2, 4, 5 and 7 (<code>BallSpeed</code>)</p></li>
<li><p>Filter for all Misses (<code>HitOrMiss</code>)</p></li>
</ol>
<p>You could do this in three filters where each one uses the output of the preceding one, or remember that filter functions can take more than one argument. Also, because the <code>JudgedSpeed</code> and <code>HitOrMiss</code> are Integer you will need <code><a href="https://rdrr.io/r/base/Comparison.html">==</a></code> instead of just <code><a href="https://rdrr.io/r/base/assignOps.html">=</a></code>.</p>
</div>
<p><br></p>
<div class="warning">
<p>
The filter function is very useful but if used wrongly can give you very misleading findings. This is why it is very important to always check your data after you perform an action. Let's say you are working in comparative psychology and have run a study looking at how cats, dogs and horses perceive emotion. Let's say the data is all stored in the tibble <code>animal_data</code> and there is a column called <code>animals</code> that tells you what type of animal your participant was. Imagine you wanted all the data from just cats:
</p>
<p>
<code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter(animal_data, animals == "cat")</a></code>
</p>
<p>
Exactly! But what if you wanted cats and dogs?
</p>
<p>
<code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter(animal_data, animals == "cat", animals == "dog")</a></code>
</p>
<p>
Right? Wrong! This actually says "give me everything that is a cat and a dog". But nothing is a cat and a dog, that would be weird - like a dat or a cog. In fact you want everything that is either a cat <strong>or</strong> a dog:
</p>
<p>
<code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter(animal_data, animals %in% c("cat", "dog"))</a></code>
</p>
<p>
You used this code when producing your own graph of babynames, it's a very helpful function so don't forget it exists!
</p>
</div>
</div>
<div id="dw2-a7" class="section level2" number="5.8">
<h2>
<span class="header-section-number">5.8</span> Activity 7: <code>mutate()</code><a class="anchor" aria-label="anchor" href="#dw2-a7"><i class="fas fa-link"></i></a>
</h2>
<p>In Data Wrangling 1, you learned how the <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> function lets us create a new variable in our dataset. However, it also has another useful function in that it can be combined with <code><a href="https://dplyr.tidyverse.org/reference/recode.html">recode()</a></code> to create new columns with recoded values. For example, let's add a new column to <code>pong_data</code> in which the judged speed is converted into a text label where <code>1</code> will become <code>Fast</code>, and <code>0</code> will become "Slow". Note that if you gave the recoded variable the same name as the original it would overwrite it.</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pong_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="va">pong_data</span>, 
                    JudgedSpeedLabel <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/recode.html">recode</a></span><span class="op">(</span><span class="va">JudgedSpeed</span>, 
                                                    <span class="st">"1"</span> <span class="op">=</span> <span class="st">"Fast"</span>, 
                                                    <span class="st">"0"</span> <span class="op">=</span> <span class="st">"Slow"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>The code here is is a bit complicated but:</p>
<ul>
<li>
<code>JudgedSpeedLabel</code> is the name of your new column,</li>
<li>
<code>JudgedSpeed</code> is the name of the old column and the one to take information from</li>
<li>Fast and slow are the new codings of 1 and 0 respectively</li>
</ul>
<p>The <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> function is also handy for making some calculations on or across columns in your data. For example, say you realise you made a mistake in your experiment where your participant numbers should be 1 higher for every participant, i.e. Participant 1 should actually be numbered as Participant 2, etc. You would do something like:</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pong_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="va">pong_data</span>, Participant <span class="op">=</span> <span class="va">Participant</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
<p>Note here that you are giving the new column the same name as the old column <code>Participant</code>. What happens here is that you are <strong>overwriting the old data with the new data</strong>! So watch out, mutate can create a new column or overwrite an existing column, depending on what you tell it to do!</p>
<p>Imagine you realise there is a mistake in your dataset and that all your trial numbers are wrong. The first trial (trial number 1) was a practice so should be excluded and your experiment actually started on trial 2.</p>
<ul>
<li>Filter out all trials with the number 1 (<code>TrialNumber</code> column) from <code>pong_data</code>,</li>
<li>Then use the <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> function to recount all the remaining trial numbers, starting them at one again instead of two. Overwrite <code>TrialNumber</code> in <code>pong_data</code> with this new data.</li>
</ul>
<p>You can either do this in two separate steps and create a new object, or you can uses pipes <code><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></code> and do it it one line of code.</p>
<div class="webex-solution">
<button>
Helpful Hint
</button>
<p>Step 1. filter(<code>TrialNumber</code> does not equal 1) - remember to store this output in a variable?</p>
<p>Step 2. mutate(<code>TrialNumber</code> = TrialNumber minus 1)</p>
</div>
</div>
<div id="dw2-a8" class="section level2" number="5.9">
<h2>
<span class="header-section-number">5.9</span> Activity 8: Summarising data<a class="anchor" aria-label="anchor" href="#dw2-a8"><i class="fas fa-link"></i></a>
</h2>
<p>Now we're going to calculate descriptive statistics for the data using <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code>. In this exercise we will calculate:</p>
<ul>
<li>The total (sum) number of hits for each combination of background colour and paddle length.</li>
<li>The mean number of hits for each combination of background colour and paddle length</li>
</ul>
<p>Because we want to produce descriptive statistics by groups (background colour and paddle length), there are two steps:</p>
<ul>
<li>Group the data by <code>BackgroundColor</code> and <code>PaddleLength</code> using <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code>.</li>
<li>Then, use <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> to calculate the total and mean number of hits (<code>HitOrMiss</code>) using the grouped data</li>
</ul>
<p>We will do this using pipes to reduce the amount of code we write. Remember to try and read the code out loud and to pronounce <code><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></code> as 'and then'. Copy and paste the below code into a new code chunk and run the code.</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pong_data_hits</span><span class="op">&lt;-</span> <span class="va">pong_data</span> <span class="op">%&gt;%</span> <span class="co"># take pong_data</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">BackgroundColor</span>, <span class="va">PaddleLength</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co"># then group it</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>total_hits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">HitOrMiss</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
            meanhits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">HitOrMiss</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="co"># then summarise it</span></code></pre></div>
<div class="info">
<p>
If you get what looks like an error that says <code>summarise() ungrouping output (override with .groups argument)</code>don't worry, this isn't an error it's just R telling you what it's done. This message was included in a very recent update to the <code>tidyverse</code> which is why it doesn't appear on some of the walkthrough vidoes.
</p>
</div>
<p><code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> has a range of internal functions that make life really easy, e.g. <code>mean</code>, <code>sum</code>, <code>max</code>, <code>min</code>, etc. See the <a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">dplyr cheatsheet</a> for more examples.</p>
<div class="info">
<p>
<code>na.rm = TRUE</code> is an argument that we can add when calculating descriptive statistics to tell R what to do if there are missing values. In this dataset, there are no missing values but if there were and we asked R to calculate the mean, it would return <code>NA</code> as the result because it doesn't know how to average nothing. Remember this argument exists, you will use it often and it save you a lot of time!
</p>
</div>
<ul>
<li>View <code>pong_data_hits</code> and enter the number of hits made with the small paddle (50) and the red colour background in this box: <input class="webex-solveme nospaces" size="3" data-answer='["517"]'>
</li>
</ul>
<p><strong>Note:</strong></p>
<ul>
<li><p>The name of the column within <code>pong_data_hits</code> is <code>total_hits</code>; this is what you called it in the above code. You could have called it anything you wanted but always try to use something sensible.</p></li>
<li><p>Make sure to call your variables something you (and anyone looking at your code) will understand and recognize later (i.e. not variable1, variable2, variable3. etc.), and avoid spaces (use_underscores_never_spaces).</p></li>
</ul>
<div class="try">
<p>
After grouping data together using the <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> function and then performing a task on it, e.g. <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>, it can be very good practice to ungroup the data before performing another function. Forgetting to ungroup the dataset won't always affect further processing, but can really mess up other things. Again just a good reminder to always check the data you are getting out of a function a) makes sense and b) is what you expect.
</p>
</div>

</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  if (t = document.getElementById("webex-total_correct")) {
    t.innerHTML =
      document.getElementsByClassName("webex-correct").length + " of " +
      document.getElementsByClassName("webex-solveme").length + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

window.onload = function() {
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }

  update_total_correct();
}

</script><script>
$( document ).ready(function() {
  var cite = ' ';
  var psyteachr = ' <a href="https://psyteachr.github.io/"><img src="images/logos/psyteachr_logo.png" style="height: 31px; color: white;" alt="psyTeachR: Reproducible Research" /></a>';
  var license = ' <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" target="blank"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>';

  $("footer div.row div:eq(1) p").html(
    psyteachr + license + cite
  );
});
</script><div class="chapter-nav">
<div class="prev"><a href="data-wrangling-1.html"><span class="header-section-number">4</span> Data wrangling 1</a></div>
<div class="next"><a href="data-wrangling-3.html"><span class="header-section-number">6</span> Data Wrangling 3</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#data-wrangling-2"><span class="header-section-number">5</span> Data wrangling 2</a></li>
<li><a class="nav-link" href="#learning-to-wrangle-is-there-a-chastity-belt-on-perception"><span class="header-section-number">5.1</span> Learning to wrangle: Is there a chastity belt on perception</a></li>
<li><a class="nav-link" href="#dw2-a1"><span class="header-section-number">5.2</span> Activity 1: Set-up Data Wrangling 2</a></li>
<li><a class="nav-link" href="#dw2-a2"><span class="header-section-number">5.3</span> Activity 2: Look at your data</a></li>
<li><a class="nav-link" href="#dw2-a3"><span class="header-section-number">5.4</span> Activity 3: select()</a></li>
<li><a class="nav-link" href="#dw2-a4"><span class="header-section-number">5.5</span> Activity 4: Reorder the variables</a></li>
<li><a class="nav-link" href="#dw2-a5"><span class="header-section-number">5.6</span> Activity 5: arrange()</a></li>
<li><a class="nav-link" href="#dw2-a6"><span class="header-section-number">5.7</span> Activity 6: filter()</a></li>
<li><a class="nav-link" href="#dw2-a7"><span class="header-section-number">5.8</span> Activity 7: mutate()</a></li>
<li><a class="nav-link" href="#dw2-a8"><span class="header-section-number">5.9</span> Activity 8: Summarising data</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/psyteachr/template/blob/master/book/05-wrangling-2.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/psyteachr/template/edit/master/book/05-wrangling-2.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Quant-Fun-V2</strong>: psyTeachR Books" was written by psyTeachR Team. It was last built on 2021-09-03.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
